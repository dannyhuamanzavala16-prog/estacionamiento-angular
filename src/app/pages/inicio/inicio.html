<!-- CONTENIDO -->
<main>
  <!-- HERO SECTION -->
  <div class="hero-section">
    <h2>
      Bienvenido al ZavalaTech Parking
      <span class="car-emoji">ğŸš—</span>
    </h2>
    <p class="subtitle">
      Consulta en tiempo real la disponibilidad de espacios de estacionamiento.
      Sistema actualizado automÃ¡ticamente para tu comodidad.
    </p>
  </div>

  <!-- ESTADO DE CARGA -->
  <div *ngIf="cargando" class="loading">
    <div class="loading-spinner"></div>
    <p>Cargando...</p>
  </div>

  <!-- ERROR -->
  <div *ngIf="error && !cargando" class="error">
    <p>âš ï¸ {{ error }}</p>
    <button class="btn-refresh" (click)="actualizarEstado()">ğŸ”„ Reintentar</button>
  </div>

  <!-- ESTADO EN TIEMPO REAL -->
  <div *ngIf="!cargando && !error" class="status-section">
    <div class="status-header">
      <h3 class="status-title">ğŸ…¿ï¸ Disponibilidad en Tiempo Real</h3>

      <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
        <div class="status-indicators">
          <div class="indicator disponibles">
            ğŸŸ¢ <span class="indicator-value">{{ libres }}</span> Libres
          </div>

          <div class="indicator ocupados">
            ğŸ”´ <span class="indicator-value">{{ ocupados }}</span> Ocupados
          </div>

          <div class="indicator total">
            ğŸ“Š <span class="indicator-value">{{ total }}</span> Total
          </div>
        </div>

        <button class="btn-refresh" (click)="actualizarEstado()">ğŸ”„ Actualizar</button>
      </div>
    </div>

    <!-- BARRA DE PROGRESO -->
    <div class="progress-container">
      <div class="progress-label">
        <span>OcupaciÃ³n del estacionamiento</span>
        <span><strong>{{ porcentajeOcupacion }}%</strong></span>
      </div>
      <div class="progress-bar">
        <div 
          class="progress-fill"
          [ngClass]="{
            'high': porcentajeOcupacion >= 80,
            'medium': porcentajeOcupacion >= 50 && porcentajeOcupacion < 80
          }"
          [style.width.%]="porcentajeOcupacion"
        >
          <span *ngIf="porcentajeOcupacion > 10">{{ porcentajeOcupacion }}%</span>
        </div>
      </div>
    </div>

    <!-- GRID DE ESPACIOS -->
    <div class="spaces-grid">
      <div
        *ngFor="let espacio of espacios"
        [ngClass]="espacio.ocupado ? 'space-card ocupado' : 'space-card libre'"
        (click)="espacio.ocupado ? mostrarInfoEspacio(espacio.vehiculo) : null"
        [title]="espacio.ocupado ? 'Click para ver detalles' : 'Espacio disponible'"
      >
        <div class="space-number">E-{{ espacio.numero | number:'2.0' }}</div>
        <div class="space-label">{{ espacio.ocupado ? 'Ocupado' : 'Libre' }}</div>

        <div class="space-info" *ngIf="espacio.ocupado && espacio.vehiculo">
          {{ espacio.vehiculo.placa }}
        </div>
      </div>
    </div>

    <!-- MENSAJE SI NO HAY ESPACIOS -->
    <div *ngIf="espacios.length === 0" style="text-align: center; padding: 2rem; color: #cbd5e1;">
      <p>â³ Inicializando espacios del estacionamiento...</p>
    </div>

    <div class="update-time">
      ğŸ• Ãšltima actualizaciÃ³n: {{ horaActual }}
    </div>
  </div>

  <!-- INFO EXTRA -->
  <div *ngIf="!cargando && !error" class="info-section">
    <div class="info-grid">

      <div class="info-card">
        <div class="info-icon">â°</div>
        <div class="info-title">Horario</div>
        <div class="info-text">
          Lunes a Viernes: 6:00 AM - 10:00 PM<br>
          SÃ¡bados y Domingos: 8:00 AM - 8:00 PM
        </div>
      </div>

      <div class="info-card">
        <div class="info-icon">ğŸ’°</div>
        <div class="info-title">Tarifas</div>
        <div class="info-text">
          Primera hora: S/. 5.00<br>
          Horas adicionales: S/. 3.00<br>
          Tarifa diaria: S/. 25.00
        </div>
      </div>

      <div class="info-card">
        <div class="info-icon">ğŸ“</div>
        <div class="info-title">UbicaciÃ³n</div>
        <div class="info-text">
          Av. Andahuaylas, Andahuaylas<br>
          Zona segura y vigilada 24/7<br>
          FÃ¡cil acceso desde vÃ­as principales
        </div>
      </div>

      <div class="info-card">
        <div class="info-icon">ğŸ“</div>
        <div class="info-title">Contacto</div>
        <div class="info-text">
          TelÃ©fono: 922238687<br>
          Email: info@Zavalatech.com<br>
          WhatsApp: +51 922 238 687
        </div>
      </div>

    </div>
  </div>
</main>