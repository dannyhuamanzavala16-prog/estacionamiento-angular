<main>
  
  <!-- ENCABEZADO -->
  <div class="page-header">
    <h1 class="page-title">ğŸ“Š Panel de EstadÃ­sticas</h1>
    <p class="page-subtitle">AnÃ¡lisis completo del rendimiento del estacionamiento</p>
  </div>

  <!-- ESTADÃSTICAS GENERALES -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-card-header">
        <span class="stat-icon">ğŸš—</span>
        <span class="stat-card-title">Total de VehÃ­culos</span>
      </div>
      <div class="stat-value">{{ totalVehiculos }}</div>
      <div class="stat-description">Registros histÃ³ricos totales</div>
    </div>

    <div class="stat-card">
      <div class="stat-card-header">
        <span class="stat-icon">â±ï¸</span>
        <span class="stat-card-title">Tiempo Promedio</span>
      </div>
      <div class="stat-value">{{ promedioTiempo }}</div>
      <div class="stat-description">DuraciÃ³n media de estancia</div>
    </div>

    <div class="stat-card">
      <div class="stat-card-header">
        <span class="stat-icon">ğŸ“…</span>
        <span class="stat-card-title">VehÃ­culos Hoy</span>
      </div>
      <div class="stat-value">{{ vehiculosHoy }}</div>
      <div class="stat-description">Registros del dÃ­a actual</div>
    </div>

    <div class="stat-card">
      <div class="stat-card-header">
        <span class="stat-icon">ğŸ”¹</span>
        <span class="stat-card-title">Por Tipo de VehÃ­culo</span>
      </div>
      <ul class="stat-list">
        <li *ngIf="vehiculosPorTipo.length === 0">
          <span>Cargando...</span>
        </li>
        <li *ngFor="let item of vehiculosPorTipo">
          <span>{{ item.tipo }}</span>
          <span class="stat-list-value">{{ item.cantidad }}</span>
        </li>
      </ul>
    </div>
  </div>

  <!-- ANÃLISIS POR DÃA DE LA SEMANA -->
  <div class="analysis-section">
    <h2 class="section-title">ğŸ“† AnÃ¡lisis por DÃ­a de la Semana</h2>
    <div class="chart-container">
      <div class="bar-chart" *ngIf="vehiculos.length > 0">
        <div 
          *ngFor="let count of vehiculosPorDia; let i = index" 
          class="bar" 
          [style.height.%]="calcularAlturaBarra(count, maxDia)">
          <span class="bar-value">{{ count }}</span>
          <span class="bar-label">{{ diasSemana[i] }}</span>
        </div>
      </div>
      <div class="empty-state" *ngIf="vehiculos.length === 0">
        <div class="empty-state-icon">ğŸ“Š</div>
        <div>No hay datos disponibles</div>
      </div>
    </div>
  </div>

  <!-- ANÃLISIS POR MES -->
  <div class="analysis-section">
    <h2 class="section-title">ğŸ“Š AnÃ¡lisis por Mes del AÃ±o</h2>
    <div class="chart-container">
      <div class="bar-chart" *ngIf="vehiculos.length > 0">
        <div 
          *ngFor="let data of vehiculosPorMes; let i = index" 
          class="bar" 
          [style.height.%]="calcularAlturaBarra(data.total, maxMes)">
          <span class="bar-value">{{ data.total }}</span>
          <span class="bar-label">{{ meses[i] }}</span>
        </div>
      </div>
      <div class="empty-state" *ngIf="vehiculos.length === 0">
        <div class="empty-state-icon">ğŸ“Š</div>
        <div>No hay datos disponibles</div>
      </div>
    </div>

    <table class="stats-table" *ngIf="datosTablaMeses.length > 0">
      <thead>
        <tr>
          <th>Mes</th>
          <th>Total VehÃ­culos</th>
          <th>Tiempo Promedio</th>
          <th>Tipo MÃ¡s ComÃºn</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let dato of datosTablaMeses">
          <td>{{ dato.mes }}</td>
          <td class="highlight">{{ dato.total }}</td>
          <td>{{ dato.tiempoPromedio }}</td>
          <td>{{ dato.tipoMasComun }}</td>
        </tr>
      </tbody>
    </table>
    <div class="empty-state" *ngIf="datosTablaMeses.length === 0">
      No hay datos
    </div>
  </div>

  <!-- ANÃLISIS POR AÃ‘O -->
  <div class="analysis-section">
    <h2 class="section-title">ğŸ“ˆ AnÃ¡lisis por AÃ±o</h2>
    <div class="chart-container">
      <div class="bar-chart" *ngIf="anios.length > 0">
        <div 
          *ngFor="let anio of anios" 
          class="bar" 
          [style.height.%]="calcularAlturaBarra(vehiculosPorAnio[anio].total, maxAnio)">
          <span class="bar-value">{{ vehiculosPorAnio[anio].total }}</span>
          <span class="bar-label">{{ anio }}</span>
        </div>
      </div>
      <div class="empty-state" *ngIf="anios.length === 0">
        <div class="empty-state-icon">ğŸ“Š</div>
        <div>No hay datos disponibles</div>
      </div>
    </div>

    <table class="stats-table" *ngIf="datosTablasAnios.length > 0">
      <thead>
        <tr>
          <th>AÃ±o</th>
          <th>Total VehÃ­culos</th>
          <th>Tiempo Promedio</th>
          <th>Mes MÃ¡s Activo</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let dato of datosTablasAnios">
          <td>{{ dato.anio }}</td>
          <td class="highlight">{{ dato.total }}</td>
          <td>{{ dato.tiempoPromedio }}</td>
          <td>{{ dato.mesMasActivo }}</td>
        </tr>
      </tbody>
    </table>
    <div class="empty-state" *ngIf="datosTablasAnios.length === 0">
      No hay datos
    </div>
  </div>

</main>
