<!-- ===== CABECERA DE ADMIN ===== -->
<header class="admin-header">
  <div style="display: flex; align-items: center; justify-content: space-between; width: 100%; flex-wrap: wrap;">
    <h1>ZavalaTech Parking</h1>
    <nav>
      <a (click)="irAInicio()" style="cursor: pointer;">Inicio</a>
      <a class="activo">VehÃ­culos</a>
      <a (click)="irAHistorial()" style="cursor: pointer;">Historial</a>
      <a (click)="irAEstadisticas()" style="cursor: pointer;">EstadÃ­sticas</a>
      <div class="admin-badge">
        <span>ğŸ‘¤</span>
        <span>{{ adminName }}</span>
      </div>
      <button (click)="cerrarSesion()" class="btn-logout" type="button">ğŸšª Salir</button>
    </nav>
  </div>
</header>

<!-- ===== CONTENIDO PRINCIPAL ===== -->
<main>

  <!-- ESTADO EN TIEMPO REAL -->
  <section class="parking-status">
    <div class="status-header">
      <h2>ğŸ…¿ï¸ Estado del Estacionamiento en Tiempo Real</h2>
      <div class="status-indicators">
        <div class="indicator disponibles">
          ğŸŸ¢ <span>{{ espaciosLibres }}</span> Libres
        </div>
        <div class="indicator ocupados">
          ğŸ”´ <span>{{ espaciosOcupados }}</span> Ocupados
        </div>
        <div class="indicator total">
          ğŸ“Š <span>{{ espaciosTotal }}</span> Total
        </div>
        <button class="btn-refresh" (click)="actualizarEstadisticas()">ğŸ”„ Actualizar</button>
      </div>
    </div>
  </section>

  <div class="dashboard-grid">

    <!-- FORMULARIO DE REGISTRO -->
    <section class="registro">
      <h2>ğŸ“ Registrar Entrada de VehÃ­culo</h2>
      
      <form (submit)="registrarVehiculo($event)">
        <div class="form-grid">
          <div class="form-group">
            <label for="placa">Placa del VehÃ­culo *</label>
            <input type="text" id="placa" placeholder="ABC-123" required>
          </div>
          
          <div class="form-group">
            <label for="propietario">Propietario *</label>
            <input type="text" id="propietario" placeholder="Juan PÃ©rez" required>
          </div>
          
          <div class="form-group">
            <label for="tipo">Tipo de VehÃ­culo *</label>
            <select id="tipo" required>
              <option value="">Seleccionar tipo</option>
              <option value="Auto">Auto ğŸš—</option>
              <option value="Moto">Moto ğŸï¸</option>
              <option value="Camioneta">Camioneta ğŸš™</option>
              <option value="SUV">SUV ğŸš</option>
            </select>
          </div>
        </div>
        
        <button type="submit">âœ“ Registrar Entrada</button>
      </form>
      
      <div id="mensaje" class="mensaje" style="display: none;"></div>
    </section>
    
    <!-- TABLA DE VEHÃCULOS -->
    <section class="tabla">
      <h2>ğŸš— VehÃ­culos Registrados ({{ vehiculos.length }})</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Espacio</th>
              <th>Placa</th>
              <th>Propietario</th>
              <th>Tipo</th>
              <th>Hora Entrada</th>
              <th>Hora Salida</th>
              <th>DuraciÃ³n</th>
              <th>Estado</th>
              <th>AcciÃ³n</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="vehiculos.length === 0">
              <td colspan="9" style="text-align:center; padding: 2rem; color: #64748b;">
                No hay vehÃ­culos registrados actualmente.
              </td>
            </tr>
            <tr *ngFor="let vehiculo of vehiculos">
              <td>E-{{ vehiculo.espacio < 10 ? '0' + vehiculo.espacio : vehiculo.espacio }}</td>
              <td><strong>{{ vehiculo.placa }}</strong></td>
              <td>{{ vehiculo.propietario }}</td>
              <td>{{ vehiculo.tipo }}</td>
              <td>{{ formatearFecha(vehiculo.horaEntrada) }}</td>
              <td>{{ vehiculo.horaSalida ? formatearFecha(vehiculo.horaSalida) : '-' }}</td>
              <td>{{ vehiculo.duracion || '-' }}</td>
              <td>
                <span [class]="vehiculo.estado === 'activo' ? 'badge-activo' : 'badge-finalizado'">
                  {{ vehiculo.estado === 'activo' ? 'ğŸŸ¢ Activo' : 'ğŸ”´ Finalizado' }}
                </span>
              </td>
              <td>
                <button 
                  *ngIf="vehiculo.estado === 'activo'" 
                  (click)="finalizarVehiculo(vehiculo)"
                  class="btn-finalizar">
                  âœ“ Finalizar
                </button>
                <span *ngIf="vehiculo.estado === 'finalizado'">-</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- ESTADÃSTICAS RÃPIDAS -->
  <section class="quick-stats">
    <h2>ğŸ“Š EstadÃ­sticas de Hoy</h2>
    
    <div class="stat-card">
      <div class="stat-label">VehÃ­culos Hoy</div>
      <div class="stat-value">{{ vehiculosHoy }}</div>
    </div>

    <div class="stat-card">
      <div class="stat-label">Activos Ahora</div>
      <div class="stat-value">{{ vehiculosActivos }}</div>
    </div>

    <div class="stat-card">
      <div class="stat-label">Tiempo Promedio</div>
      <div class="stat-value">{{ tiempoPromedio }}</div>
    </div>

    <div class="stat-card">
      <div class="stat-label">OcupaciÃ³n</div>
      <div class="stat-value">{{ porcentajeOcupacion }}%</div>
    </div>
  </section>

</main>

<!-- ===== PIE DE PÃGINA ===== -->
<footer>
  Â© 2025 <strong>ZavalaTech</strong> | Sistema de GestiÃ³n de Estacionamiento | Todos los derechos reservados
</footer>